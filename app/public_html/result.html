<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Searchify</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
</head>
<body>
	<div>
	</div>
    <div>
        <h1 class="header">Resluts</h1>
        <br>
        <hr class="rounded">
        <br>
        <a href="/login" class="login">Search Again</a>
        <br>
    </div>

    <br>
    <img id = "artistImage" src="" alt="Image of Searched Artist" style="width:400px;height:300;"></img>
    <br>
    <div id = "artist">
        <label for="artist"></label>
    </div>
    <div id = "followers">
        <label for="followers"></label>
    </div>
    <div id = "genre">
        <label for="genre"></label>
    </div>
    <div>
        <a href="" class="login" id = "uri">View on Spotify</a>
    </div>

    <div id="chart-container">
        <svg id="chart">
            
        </svg>
        </div>
    <div id="chart">
		</div>
<script>
// let p = d3.select("body").selectAll("p")
// 	.data(dataset) // dataset undefined
// 	.enter()
// 	.append("p")
// 	.text(function(d) {return d;});
// let svg = d3.select("body").append("svg");


let artist = localStorage.getItem("artist");
let followers = localStorage.getItem("followers");
let genre = localStorage.getItem("genre");
let uri = localStorage.getItem("uri");
let image = localStorage.getItem("image");


let artistDiv = document.getElementById("artist");
artistDiv.textContent = "Artist Name: " + artist;
let followersDiv = document.getElementById("followers");
followersDiv.textContent = "Followers: " + followers;
let genreDiv = document.getElementById("genre");
genreDiv.textContent = "Genre: " + genre;
let uriDiv = document.getElementById("uri");
uriDiv.href = uri;
let artistImage = document.getElementById("artistImage");
artistImage.src = image;

// Need to integrate related artist search below

/*let p = d3.select("body").selectAll("p")
.data(dataset)
.enter()
.append("p")
.text(function(d) {return d;});
let svg = d3.select("body").append("svg");
*/

// //beginning of related artists fetch
// function relatedFunction(artistURI){
//     console.log(artistURI);
// let fetchURL = '/related?uri=' + artistURI;
// fetch(fetchURL).then(function (response) {
//     console.log(response.status);
//     if (response.status === 200){
//         return response.json();
//     } else {
//         console.log("error");
//     }
// }).then(function (response) {
    
//     console.log(response);
//     let svg = d3.select("svg").attr("viewBox", [0,0, width, height]);
    
//     let artist = response[i].name;
//     let followers = response[i].follwers;
//     let genre = response[i].genre;
//     let imageURL = response[i].imageURL;
//     let URI = response[i].uri;
    
//     const scale = 1.7;
//     const center = [width / 2, height / 2];
    
//     // "nodes" refers to each attribute from response.

//     /* some sort of for loop here to generate the circles w the necessary data, use the variables below for correct naming conventions
        
//     the following variables access the response json:
        
//     let artist = response[i].name;
//     let followers = response[i].followers;
//     let genre = response[i].genre;
//     let imageURL = response[i].imageURL;
//     let URI = response[i].uri;
//     */
    
//     for (let i = 0; i < 20; i++){
//     svg.append("circle");
//         let node = svg.append("g")
//         .selectAll("circle")
//         .data(artist)
//         .join("circle")
//             .attr("r", 4)
//             .attr("fill", d => d.color);
//         console.log(response[i].name);
//     }
    
// }).catch(function (error) {
//     console.log(error);
// });}
    

</script>
</body>
</html>
